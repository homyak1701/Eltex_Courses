Tags: #
***
- Однопоточные программы C содержат два основных класса данных: локальные и глобальные данные. Для многопоточных программ C добавляется третий класс: данные потока. Они похожи на глобальные данные, за исключением того, что они являются собственными для потока.
- Например, код может быть выполнен любым числом потоков, но он содержит ссылки на две глобальных переменных, errno и mywindow, которые в действительности должны быть ссылками на объекты, являющиеся частными для каждого потока.

#### потокобезопасность
-  потокобезопасность - это абстракция, при которой одна и та же область памяти не задействуется несколькими потоками одновременно;
- чтобы понять, что функция потокобезопасна, то в man можно найти раздел атрибутов, где во втором столбике будет написано какая это функция;

#### реитерабельность
-  реитерабельность - функционал, который позволяет одновременно использовать функцию несколькими потоками и при том работа этой функции нарушаться не будет;
- она достигается без mutex, а с помощью ключа(key) - уникальное хранилище, которое не разделяет между потоками и используется под определенную задачу;
- использование реитерабельных функций удобно, когда ты пишешь для себя и заранее известно, что ее будут использовать для многих потоков;

#### функции
-  pthread_key_t - тип данных для создания ключа;
- pthread_once_t - тип данных для создания единичного использования;
- [[6.3.5.3.1.3. pthread_once()]] - передаем функцию и только первый поток ее использует;
- [[6.3.5.3.1.1. pthread_key_create()]] - создание уникального хранилища;
- [[6.3.5.3.1.2. pthread_getspecific() - pthread_setspecific()]] - записать в ключ указатель на буфер;

![[Pasted image 20220806143258.png]]

***
#### Zero_Link
- 
***
### Links
Up:

Down:


