Tags: #
***
###
- Канал - это очередь данных, которые попадают в фуфер, также и извлекаются
	- user busser -> kernal buffer -> user buffer

![[Pasted image 20220806163931.png]]
- так как канал имеет парный дескриптор, то из буфера ядра можно, как считывать, так и записывать, можно сказать, что он двунаправленный. однако мы его используем только в одном направлении. для двустороннего обмена мы используем еще один канал

![[Pasted image 20220806165153.png]]

- буфер/файлы будут сущетсвовать, пока на него будут ссылаться процессы (способность счетчика ссылок), чтобы нельзя было удалить файл/буфер, когда с ним работает любой процесс;

#### -- неименованный канал --
- **неименованный канал** (англ., anonymouse pipe) - один из методов межпроцессорного взаимодейтсвия (IPC) в операционной системе, который доступен связанным процессам - родительскому и дочернему;
 - чтобы у два процесса знали о файловых дескрипторов друг друга нужно, чтобы они были родственными (родитель и потомок)
- буфер будет существовать, пока на него будут ссылаться хоть один из родственных процессов
- Неименованный канал создается вызовом pipe, который заносит в массив int[2] два дескриптора открытых файлов. fd[0] – открыт на чтение, fd[1] – на запись (STDIN == 0, STDOUT == 1). Канал уничтожается, когда будут закрыты все файловые дескрипторы ссылающиеся на него.
![[Pasted image 20220808135743.png]]
- Если система вызывает read (), когда канал пуст, он будет заблокирован до тех пор, пока канал не получит данные для чтения; когда канал заполнен, вызовите также write () Будет заблокировано до тех пор, пока в конвейере не станет достаточно свободного места.

#### -- именованные каналы --
- Именованный канал FIFO доступен как объект в файловой системе. При этом, до открытия объекта FIFO на чтение, собственно коммуникационного объекта не создаётся. После открытия открытия объекта FIFO в одном процессе на чтение, а в другом на запись, возникает ситуация полностью эквивалентная использованию неименованного канала. (p на рисунке нижу обозначает, что файл является каналом);

![[Pasted image 20220808152332.png]]

- Объект FIFO в файловой системе создаётся вызовом функции int mkfifo(const char *pathname, mode_t mode);,

- Основное отличие между pipe и FIFO - то, что pipe могут совместно использовать только процессы находящиеся в отношении родительский-дочерний, а FIFO может использовать любая пара процессов.

- Поскольку запись в именованный канал означает сохранение данных в буфере памяти, операции с большими файлами значительно сокращают дисковый ввод-вывод.

#### -- функции --
- [[6.3.4.2.1. pipe()]]
- [[6.3.4.2.2. dup() - dup2()]]
- [[6.3.4.2.3. mkfifo()]]
***
#### Zero_Link
- 
***
### Links
Up:

Down:


