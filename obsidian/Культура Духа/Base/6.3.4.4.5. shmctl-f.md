Tags: #
***
###
![[Pasted image 20220904141153.png]]

**shmctl()** позволяет пользователю получать информацию о разделяемых сегментах памяти, устанавливать владельца, группу разделяемого сегмента, права на него; эта функция может также удалить сегмент. Информация о сегменте, которая находится в _shmid_, возвращается в структуру _shmid_ds_ :

![[Pasted image 20220904141241.png]]

Выделенные поля в _shm_perm_ могут быть установлены следующим образом:

![[Pasted image 20220904141257.png]]

Значения аргумента _cmds_ могут быть следующими:  

- **IPC_STAT** спользуется для копирования информации о сегменте в буфер _buf_. Пользователь должен иметь права на чтение сегмента **read**.

- **IPC_SET** используется для применения пользовательских изменений к содержимому полей _uid_, _gid_ или _mode_ в структуре _shm_perms_. Используются только младшие 9 битов _mode_. Поле _shm_ctime_ тоже обновляется. Пользователь должен быть владельцем, создателем или суперпользователем процесса.

- **IPC_RMID** используется для пометки сегмента как удаленного. Сегмент будет удален после отключения (например, когда поле _shm_nattch_ ассоциированной структуры _shmid_ds_ равно нулю). Пользователь должен быть владельцем, создателем или суперпользователем процесса.
	
	Пользователь _должен_ удостовериться, что сегмент удален; иначе страницы, которые не были удалены, останутся в памяти или в разделе подкачки.
	Также процессы с соответствующими привилегиями могут предотвратить или разрешить подкачку разделяемого сегмента памяти при помощи следующих команд _cmds_ (применимо только для Linux):  

- **SHM_LOCK** запретить подкачку разделяемого сегмента памяти. После блокировки страницы должны находиться в памяти.

- **SHM_UNLOCK** разрешить подкачку сегмента.

####

***
#### Zero_Link
- 
***
### Links
Up:

Down:


